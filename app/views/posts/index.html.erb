<div class="fade"></div>
	<h3>Posts by you and your friends 	<%= link_to 'new post', new_post_path, class: 'btn btn-default f-right' %></h3>

	<style>
	      .map-container{

        height:500px;
      }
      #map {
        height: 100%;
      }

	</style>
<div class="map-container container">
    <div id="map" style="height:100%;"></div>
</div>
<script>


var image = '/img/m.png';
  $.post( "https://www.googleapis.com/geolocation/v1/geolocate?key=AIzaSyAMIc7OAUicwD3-NJJ0wFmcxLlXD8B_Y5U", function( geo ) {
       var styles = [{"featureType":"administrative.locality","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"landscape","elementType":"all","stylers":[{"color":"#AFFFA0"}]},{"featureType":"poi","elementType":"all","stylers":[{"color":"#EAFFE5"}]},{"featureType":"poi.business","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"poi.government","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"road","elementType":"geometry","stylers":[{"color":"#59A499"}]},{"featureType":"road","elementType":"geometry.stroke","stylers":[{"color":"#F0FF8D"},{"weight":2.2}]},{"featureType":"water","elementType":"all","stylers":[{"visibility":"on"},{"color":"#1A87D6"}]}];
  var styledMap = new google.maps.StyledMapType(styles,
    {name: "Styled Map"});
    var long = geo.location.lng;var lat = geo.location.lat;
  var mapOptions = {
    zoom: 14,
    center: new google.maps.LatLng(geo.location.lat,geo.location.lng),
    mapTypeControlOptions: {
      mapTypeIds: ['roadmap', 'map_style']
    }
  };
  var map = new google.maps.Map(document.getElementById('map'),
    mapOptions);
      map.mapTypes.set('map_style', styledMap);
      map.setMapTypeId('map_style');
  });
</script>
<div class="container grid all-posts-grid" id="wrapper">
<div id="columns">
	<% if @posts %>
	<% @posts.each do |x| %>

	<div class="post-container item">
	<div class="row-fluid">
			<h3 class="col-xs-4 pic-title">
				<%= x.title %>		
			</h3>
			<img src="<%= x.url%>" class="uploaded">


		</div>
		<img src="http://maps.googleapis.com/maps/api/staticmap?center=<%= x.latitude %>,<%= x.longitude %>&zoom=16&size=300x150&maptype=roadmap&markers=color:red%7Clabel:C%7C<%= x.latitude %>,<%= x.longitude %>&key=AIzaSyAMIc7OAUicwD3-NJJ0wFmcxLlXD8B_Y5U">
<script>



        var marker= new google.maps.Marker({
          position: {lat: <%=x.latitude%>, lng:<%= x.longitude %> },
          map: map,
          icon: image
        });

    </script>

		<div class="row-fluid" style="width:100%;display:inline-flex;">

			<%= link_to 'edit post',edit_post_path(x.id), class: "btn btn-gzn f-l" %>

			<%= link_to 'view post',post_path(x.id), class: "btn btn-gzn f-r" %>
			<% #link_to 'delete post',posts_delete_path(x.id), class: "btn btn-gzn f-r", :method => :delete %>
		</div>

<div class="col-xs-12 post-content">
	
		<%= x.content%>		
</div>
	</div>
	<% end %>
	<% end %>
</div>
</div>




    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAMIc7OAUicwD3-NJJ0wFmcxLlXD8B_Y5U">
    </script>